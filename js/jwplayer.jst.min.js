function get_location(){for(var e=location.search.substring(1).split("?"),t=0;e[t];t++)value=e[t].split(",");dir=value[0],cid=value[1],token=value[2],mid=value[3]}var tag=new Object;tag="https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/14422805/Jst_test_mz&impl=s&gdfp_req=1&env=vp&output=xml_vast2&unviewed_position_start=1&url=[referrer_url]&description_url=http:%2F%2Fwww3.stream.co.jp/&correlator=[timestamp]";var value,dir,cid,mid,token;get_location();var param={"mvAd-play":{primary:"html5",androidhls:!0,playlist:[{cid:cid,mid:mid,token:token}],plugins:{},width:640,height:360}};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){H=e}function o(e){Q=e}function r(){return function(){return process.nextTick(d)}}function i(){return"undefined"!=typeof z?function(){z(d)}:l()}function a(){var e=0,t=new K(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;D>e;e+=2){var t=$[e],n=$[e+1];t(n),$[e]=void 0,$[e+1]=void 0}D=0}function c(){try{var e=require,t=e("vertx");return z=t.runOnLoop||t.runOnContext,i()}catch(n){return l()}}function u(e,t){var n=arguments,o=this,r=new this.constructor(g);void 0===r[te]&&P(r);var i=o._state;return i?!function(){var e=n[i-1];Q(function(){return U(i,r,e,o._result)})}():x(o,r,e,t),r}function p(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(g);return w(n,e),n}function g(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return ie.error=t,ie}}function y(e,t,n,o){try{e.call(t,n,o)}catch(r){return r}}function v(e,t,n){Q(function(e){var o=!1,r=y(n,t,function(n){o||(o=!0,t!==n?w(e,n):C(e,n))},function(t){o||(o=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!o&&r&&(o=!0,k(e,r))},e)}function b(e,t){t._state===oe?C(e,t._result):t._state===re?k(e,t._result):x(t,void 0,function(t){return w(e,t)},function(t){return k(e,t)})}function _(e,n,o){n.constructor===e.constructor&&o===u&&n.constructor.resolve===p?b(e,n):o===ie?k(e,ie.error):void 0===o?C(e,n):t(o)?v(e,n,o):C(e,n)}function w(t,n){t===n?k(t,h()):e(n)?_(t,n,m(n)):C(t,n)}function E(e){e._onerror&&e._onerror(e._result),j(e)}function C(e,t){e._state===ne&&(e._result=t,e._state=oe,0!==e._subscribers.length&&Q(j,e))}function k(e,t){e._state===ne&&(e._state=re,e._result=t,Q(E,e))}function x(e,t,n,o){var r=e._subscribers,i=r.length;e._onerror=null,r[i]=t,r[i+oe]=n,r[i+re]=o,0===i&&e._state&&Q(j,e)}function j(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var o=void 0,r=void 0,i=e._result,a=0;a<t.length;a+=3)o=t[a],r=t[a+n],o?U(n,o,r,i):r(i);e._subscribers.length=0}}function q(){this.error=null}function S(e,t){try{return e(t)}catch(n){return ae.error=n,ae}}function U(e,n,o,r){var i=t(o),a=void 0,s=void 0,l=void 0,d=void 0;if(i){if(a=S(o,r),a===ae?(d=!0,s=a.error,a=null):l=!0,n===a)return void k(n,f())}else a=r,l=!0;n._state!==ne||(i&&l?w(n,a):d?k(n,s):e===oe?C(n,a):e===re&&k(n,a))}function I(e,t){try{t(function(t){w(e,t)},function(t){k(e,t)})}catch(n){k(e,n)}}function R(){return se++}function P(e){e[te]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function A(e,t){this._instanceConstructor=e,this.promise=new e(g),this.promise[te]||P(this.promise),W(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):k(this.promise,T())}function T(){return new Error("Array Methods must be provided an Array")}function B(e){return new A(this,e).promise}function F(e){var t=this;return new t(W(e)?function(n,o){for(var r=e.length,i=0;r>i;i++)t.resolve(e[i]).then(n,o)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function M(e){var t=this,n=new t(g);return k(n,e),n}function J(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function O(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(e){this[te]=R(),this._result=this._state=void 0,this._subscribers=[],g!==e&&("function"!=typeof e&&J(),this instanceof L?I(this,e):O())}function V(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var o=null;try{o=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===o&&!n.cast)return}e.Promise=L}var N=void 0;N=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var W=N,D=0,z=void 0,H=void 0,Q=function(e,t){$[D]=e,$[D+1]=t,D+=2,2===D&&(H?H(d):ee())},G="undefined"!=typeof window?window:void 0,Y=G||{},K=Y.MutationObserver||Y.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),ee=void 0;ee=X?r():K?a():Z?s():void 0===G&&"function"==typeof require?c():l();var te=Math.random().toString(36).substring(16),ne=void 0,oe=1,re=2,ie=new q,ae=new q,se=0;return A.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ne&&e>n;n++)this._eachEntry(t[n],n)},A.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,o=n.resolve;if(o===p){var r=m(e);if(r===u&&e._state!==ne)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===L){var i=new n(g);_(i,e,r),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(o(e),t)},A.prototype._settledAt=function(e,t,n){var o=this.promise;o._state===ne&&(this._remaining--,e===re?k(o,n):this._result[t]=n),0===this._remaining&&C(o,this._result)},A.prototype._willSettleAt=function(e,t){var n=this;x(e,void 0,function(e){return n._settledAt(oe,t,e)},function(e){return n._settledAt(re,t,e)})},L.all=B,L.race=F,L.resolve=p,L.reject=M,L._setScheduler=n,L._setAsap=o,L._asap=Q,L.prototype={"catch":function(e){return this.then(null,e)},constructor:L,then:u},L.polyfill=V,L.Promise=L,L}),ES6Promise.polyfill();var pid,mid,cid,keyJson,pdEnabled,undefined,hasFlash=!1,mp4uri=[],video={},httpProtocol="http://",httpProtocolParam="",url={VERSION:"3.01",JW:"jplib.cdnext.stream.ne.jp",LIBRARY:"jblib-manifest.cdnext.stream.ne.jp/jplib",MAKE_MP4:"jblib-manifest.cdnext.stream.ne.jp/jplib",ACCESS_API:"api01-platform.stream.co.jp/apiservice/getAccessControl2/"},debugFlag=!1,debugColor;Array.prototype.getLastVal=function(){return this[this.length-1]};var debug=function(e,t,n){var o=window.navigator.userAgent.toLowerCase();if(!t||!debugFlag)return!1;var r;"setup"===e&&console.log("%c[Setup]%c■■■%c "+t,"color: Lime;background-color: Black; padding: 3px;font-weight: bold;","color:"+debugColor+";background-color:"+debugColor,""),"jwplayer"===e&&console.log("%c[Player]%c "+t,"color: Blue;background-color: SkyBlue; padding: 3px;font-weight: bold;","color:Lime;"),"eq"===e&&console.log("%cAnalytics[EQ]%c "+t,"color: blue;background-color: #FFFC03; padding: 3px;font-weight: bold;",""),"aq"===e&&console.log("%cAnalytics[AQ]%c "+t,"color: green;background-color: #FFFC03; padding: 3px;font-weight: bold;",""),"ga"===e&&console.log("%cAnalytics[GA]%c "+t,"color: #DE0006;background-color: #FFFC03; padding: 3px;font-weight: bold;",""),"GET-false"===e&&console.log("%c[GET]%c "+t,"color: white;background-color: green; padding: 3px;font-weight: bold;",""),"VideoFile"===e&&(t.match(/m3u8/)?r="m3u8":t.match(/mp4/)&&(r="mp4"),console.log("%c[VideoFile: "+r+"]%c "+t,"color: blue;background-color: SkyBlue; padding: 0 3px;font-weight: bold;","")),"info"===e&&(t.match(/m3u8/)?r="m3u8":t.match(/mp4/)&&(r="mp4"),-1===o.indexOf("msie")&&console.group(n),console.log("LogColor: %c■■■","color:"+debugColor+";background-color:"+debugColor),console.log("Protocol:",httpProtocol),console.log("Primary:",param[n].primary),console.log("Flash:",hasFlash),console.log("PD設定:",pdEnabled),console.log("File:",r),console.log("Video:",t),-1===o.indexOf("msie")&&console.groupEnd())},showError=function(e,t){var n=document.getElementById(t),o=n.querySelector(".jw-title"),r=param[t],i=document.createElement("div"),a=document.createElement("div"),s=document.createElement("p"),l=r.width+"px",d=r.height+"px",c=n.querySelector(".errorBackImage");c&&c.parentNode.removeChild(c),l!==undefined&&d!==undefined||(l=param[t].width+"px",d=param[t].height+"px"),o?(n.removeChild(o),jwplayer(t).setControls(!1)):n.innerHTML="",i.style.width=l,i.style.height=d,i.style.background="rgba(0,0,0,0.6)",i.className="errorBox",n&&(i.style.position="absolute"),s.innerText=e,s.style.color="#fff",s.style.textAlign="center",s.style.lineHeight=d,s.style.margin="0",s.className="errorMessage",a.style.width=l,a.style.height=d,a.style.background='url("'+r.playlist[0].image+'") #000',a.style.backgroundSize="contain",a.className="errorBackImage",i.appendChild(s),a.appendChild(i),n.appendChild(a)},error404={"service.jsonp":"プレイヤーが生成できません(E1001)","jwplayer.js":"プレイヤーが生成できません(E1002)","makeJsonp.php":"プレイヤーが生成できません(E1003)"},accessErrorCode={2000:"この動画は、再生が許可されておりません(E2000)",2001:"この動画は、再生が許可されておりません(E2001)",2002:"この動画は現在公開されておりません(E2002)",2003:"この動画はまだ公開されておりません(E2003)",2004:"この動画の公開は終了しました(E2004)"},errorMessage={"Flash plugin failed to load":"Flash plugin failed to load","Cannot load M3U8: No leveles to play":"Cannot load M3U8: No leveles to play","Error loading player: Could not load player configuration":"プレイヤーを呼び出せません(JW001)","Error loading player:Flash version must be 11.2 or greater":"Flash Playerを最新版にしてください(JW002)","Error loading player:No media sources found":"ファイルが見つかりません(JW003)","Error loading player:Offline playback not supported":"オフラインでは再生できないファイルです(JW004)","Error loading player: No playable sources found":"再生可能なファイルがありません(JW005)","Error loading playlist: File not found":"再生可能なファイルがありません(JW006)","Error loading playlist: Crossdomain loading denied":"セキュリティ上の制限がかかっています(JW007)","Error loading playlist: Error loading file":"ファイルの取得に失敗しました(JW008)","Error loading playlist: Not a valid RSS feed":"ファイルの取得に失敗しました(JW009)","Error loading playlist: No playable sources found":"再生可能なファイルがありません(JW010)","Error loading media: File not found":"再生可能なファイルがありません(JW011)","Cannot load M3U8: 404 ":"再生可能なファイルがありません(JW012)","Cannot load M3U8: 404 Not Found":"再生可能なファイルがありません(JW012)","Cannot load M3U8: 404 not found":"再生可能なファイルがありません(JW012)","Error loading media: File could not be played":"再生可能なファイルがありません(JW013)","Cannot load M3U8: File crossdomain access denied":"セキュリティ上の制限がかかっています(JW014)","Error loading stream: Could not connect to server":"サーバーに接続できません(JW015)","Error loading stream: ID not found on server":"不正なIDです(JW016)","Error loading stream: Manifest not found or invalid":"ファイルの取得に失敗しました(JW017)","Video stutters frequently":"正しく再生できませんでした(JW018)","Video is stretched or has black bars":"正しく再生できませんでした(JW019)","MP3 playback is too fast or too slow":"正しく再生できませんでした(JW020)","MP4 video seeking is not working":"ファイルの取得に失敗しました(JW021)"},aqObject=aqObject||{_q:[],tag:function(){this._q.push(arguments)},jsload:function(e){var t,n;(t=document.createElement("script"))&&(t.type="text/javascript",t.async=!0,t.src=httpProtocol+e,n=document.getElementsByTagName("script")[0],n.parentNode.insertBefore(t,n))}},Analytics=function(){function e(){this.init()}return e.prototype.getDomain=function(){var e=location.hostname.match(/^(.*?)([a-z0-9][a-z0-9\-]{1,63}\.[a-z\.]{2,6})$/i);return null==e?".localhost":(e[2]="."+e[2],e[2])},e.prototype.setBaseURL=function(e){this._baseURL=e},e.prototype.getBaseURL=function(){return this._baseURL},e.prototype.getVc=function(){return this._vc},e.prototype.setVc=function(e){this._vc=e},e.prototype.getSelf=function(){return this._self},e.prototype.setSelf=function(e){this._self=e},e.prototype.getCid=function(){return this._cid},e.prototype.setCid=function(e){this._cid=e},e.prototype.getSid=function(){return this._sid},e.prototype.setSid=function(e){this._sid=e},e.prototype.getUrl=function(){return this._url},e.prototype.setUrl=function(e){this._url=e},e.prototype.getRef=function(){return this._ref},e.prototype.setRef=function(e){this._ref=e},e.prototype.getSvcid=function(){return this._svcid},e.prototype.setSvcid=function(e){this._svcid=e},e.prototype.getVid=function(){return this._vid},e.prototype.setVid=function(e){this._vid=e},e.prototype.getUid=function(){return this._uid},e.prototype.setUid=function(e){this._uid=e},e.prototype.getTotal=function(){return this._total},e.prototype.setTotal=function(e){this._total=e},e.prototype.getPid=function(){return this._pid},e.prototype.setPid=function(e){this._pid=e},e.prototype.getTagType=function(){return this._tagType},e.prototype.setTagType=function(e){this._tagType=e},e.prototype.getObject=function(){return this._object},e.prototype.setObject=function(e){this._object=e},e.prototype.requestUpdate=function(e){this.requestExec(e)},e.prototype.lastBeacon="",e.prototype.request=function(e){this.lastBeacon!=e.stat&&(this.lastBeacon=e.stat,this.requestExec(e))},e.prototype.requestExec=function(e){var t=this.genURL(e);""!=t&&(this.send(t),e.c?debug("eq","click: "+e.c):debug("eq",e.stat))},e.prototype.send=function(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t),document.body.removeChild(t)},e.prototype.genURL=function(e){var t=this.getBaseURL();if(this.getSvcid()===undefined||null===this.getSvcid()||""===this.getSvcid())return"";if(t+="?sv="+encodeURIComponent(this.getSvcid()),e.playhead===undefined||null===e.playhead||""===e.playhead)return"";if(t+="&s="+encodeURIComponent(e.playhead),e.stat===undefined||null===e.stat||""===e.stat)return"";if(t+="&e="+encodeURIComponent(e.stat),this.getVid()===undefined||null===this.getVid()||""===this.getVid())return"";t+="&v="+encodeURIComponent(this.getVid()),t+="&lt="+(new Date).getTime(),this.getVc()&&(t+="&vc="+encodeURIComponent(this.getVc())),this.getSid()&&(t+="&sd="+encodeURIComponent(this.getSid())),this.getUid()&&(t+="&u="+encodeURIComponent(this.getUid())),this.getPid()&&(t+="&p="+encodeURIComponent(this.getPid())),this.getCid()&&(t+="&cd="+encodeURIComponent(this.getCid())),this.getRef()&&(t+="&rf="+encodeURIComponent(this.getRef())),this.getSelf()&&(t+="&url="+encodeURIComponent(this.getSelf())),this.getObject()&&(t+="&o="+encodeURIComponent(this.getObject())),this.getTagType()&&(t+="&tagtype="+encodeURIComponent(this.getTagType())),t+="&t="+encodeURIComponent(this.getTotal());var n=["playhead","stat"];for(var o in e){var r=n.indexOf(o);0>r&&(t+="&"+o+"="+encodeURIComponent(e[o]))}return t},e.prototype.setEvents=function(e){var t=this;e.addEventListener("change_state",function(){var n={playhead:e.getCurrentTime(),stat:e.state};switch(e.state){case"landing":t.request(n);break;case"playing":t.request(n);break;case"paused":t.request(n);break;case"seek_start":n.stat="paused",t.request(n);break;case"complete":t.request(n);break;case"exit":n.stat="exit",t.request(n)}}),e.addEventListener("update",function(){var n={playhead:e.getCurrentTime(),stat:"updated"};t.requestUpdate(n)}),e.addEventListener("exit",function(){var n={playhead:e.getCurrentTime(),stat:"exit"};t.request(n)})},e.prototype.sendClickBeacon=function(e,t){var n={playhead:t,c:e,stat:"click"};this.requestUpdate(n)},e.prototype.init=function(){this.setSelf(encodeURIComponent(document.location.href)),this.setVc(this.random(4));var e=this.getQuerystring("cid",""),t=this.getQuerystring("sid","");""==e?this.setCid(this.createCid()):this.setCid(e),""==t?this.setSid(this.createSid()):this.setSid(t),this.initBaseURL()},e.prototype.initBaseURL=function(){var e="http";0==location.href.indexOf("https://")&&(e="https"),this._baseURL=e+"://eq-beacon.stream.co.jp/va/"},e.prototype.getQuerystring=function(e,t){null==t&&(t=""),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)"),o=n.exec(window.location.href);return null==o?t:o[1]},e.prototype.setCookieSID=function(t){var n="VA_SESSION_ID="+t+";";n+=" path=/;",e._domain&&(n+=" domain="+e._domain+";"),document.cookie=n},e.prototype.createSid=function(){if(document.cookie)for(var e=document.cookie.split("; "),t=0;t<e.length;t++){var n=e[t].split("=");if("VA_SESSION_ID"==n[0])return n[1]}var o=this.random(32);return this.setCookieSID(o),o},e.prototype.setCookieCID=function(t){var n=new Date;n.setFullYear(n.getFullYear()+1);var o="VA_CONV_ID="+t+";";o+=" path=/;",o+=" expires="+n.toGMTString()+";",e._domain&&(o+=" domain="+e._domain+";"),document.cookie=o},e.prototype.createCid=function(){if(e._domain=this.getDomain(),document.cookie)for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=");if("VA_CONV_ID"==o[0]){var r=o[1];return this.setCookieCID(r),o[1]}}var i=this.random(32);return this.setCookieCID(i),i},e.prototype.random=function(e){var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";t=t.split("");for(var n="",o=0;e>o;o++)n+=t[Math.floor(Math.random()*t.length)];return n},e.prototype.createGoogleAnalytics=function(e){e!==!1&&(!function(e,t,n,o,r,i,a){e.GoogleAnalyticsObject=r,e[r]=e[r]||function(){(e[r].q=e[r].q||[]).push(arguments)},e[r].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=o,a.parentNode.insertBefore(i,a)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",keyJson.ga_id,"auto",{name:""}),ga("send","pageview"))},e}(),jsonpRequest=function(e,t){return new Promise(function(n,o){if(!e)return void t();debug("GET",e.split("/").getLastVal());var r=!1,i=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.src=e,a.setAttribute("defer",!0),document.getElementsByTagName("head")[0].appendChild(a),window.external_script_onload=t,a.onerror=function(e){var t=e.target.src;for(var n in error404)if(~t.indexOf(n))for(var r in param)showError(error404[n],r);o({message:"APIにアクセスできませんでした"})},a.onload=a.onreadystatechange=function(){r||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r=!0,t(),a.onload=a.onreadystatechange=null,i&&a.parentNode&&i.removeChild(a),n())}})},closeExtenstionButton=function(e){var t=document.getElementById(e);t.parentNode.removeChild(t),"paused"===jwplayer().getState()&&jwplayer().pause(!1)},setDecode=function(e){var t=e.match(/[^0-9]/);return t&&(e=base64decode(e)),e},base64decode=function(e){for(var t,n,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",i=-8,a=0,s=0;s<e.length;s++)(t=o.indexOf(e.charAt(s)))<0||(a=a<<6|63&t,(i+=6)>=0&&(n=a>>i&255,64!=t&&(r+=String.fromCharCode(n)),a&=63,i-=8));return r},setPlayerEvent=function(e,t,n){var o={},r=param[t].plugins,i="page_type=VideoPlayer&cid="+video[t].cid+"&MetaId="+video[t].mid,a=video[t].playFlgAq,s=video[t].replayFlg;if(e.on("error",function(e){var n=errorMessage[e.message];n||(n=e.message),showError(n,t),debug("jwplayer","error");var o="";try{o=encodeURIComponent(n)}catch(r){}aqObject.tag("tag_cat",i+"&event=error$message="+o),debug("aq",n),video[t].ga&&ga("send","event","Video Player","Error",video[t].title)}),e.on("setupError",function(){var e=errorMessage[error.message];e||(e=error.message),showError(e,t),debug("jwplayer","setupError",e)}),e.on("play",function(){debug("jwplayer","play"),s?(o={playhead:video[t].playhead,stat:"replay"},s=!1):o={playhead:video[t].playhead,stat:"playing"},n.requestExec(o),0==a?(aqObject.tag("tag_cat",i+"&event=landing&totaltime="+video[t].duration),video[t].ga&&ga("send","event","Video Player","Play",video[t].title),a=!0,debug("aq","landing")):(aqObject.tag("tag_cat",i+"&event=playing"),debug("aq","playing"))}),e.on("complete",function(){debug("jwplayer","Complete"),aqObject.tag("tag_cat",i+"&event=complete&duration="+Math.ceil(this.getPosition())),debug("aq","complete"),video[t].ga&&ga("send","event","Video Player","Complete",video[t].title),n.requestExec({playhead:video[t].playhead,stat:"complete"}),a=!1,s=!0}),e.on("time",function(e){var o=Math.floor(e.position);o!==video[t].playhead&&o%5===0&&o>0&&(debug("jwplayer","Time: "+e.position),aqObject.tag("tag_cat",i+"&event=progress&duration="+o),debug("aq","progress"),video[t].playhead=o,n.requestExec({playhead:video[t].playhead,stat:"updated"}))}),e.on("pause",function(){debug("jwplayer","Pause: "+video[t].playhead),aqObject.tag("tag_cat",i+"&event=paused"),debug("aq","paused"),n.requestExec({playhead:video[t].playhead,stat:"paused"})}),e.on("seek",function(){debug("jwplayer","Seek: "+Math.floor(video[t].playhead)),aqObject.tag("tag_cat",i+"&event=seek_start"),debug("aq","seek_start"),n.requestExec({playhead:Math.floor(video[t].playhead),stat:"paused"})}),e.on("buffer",function(){debug("jwplayer","Buffer"),debug("aq","buffering"),aqObject.tag("tag_cat",i+"&event=buffering")}),param[t].jstOnReady!==undefined&&e.on("ready",param[t].jstOnReady),r.exlinks||r.sharing||r.showad){var l=document.createElement("div");l.id=e.id+"_jwplayer.jst.ext",l.style.position="relative",l.style.bottom=0}if(r.showad){e.on("adImpression",function(){debug("jwplayer","AdImpression");var t=e.id+"_showad";if(document.getElementById(t))document.getElementById(t).style.display="block";else{var n=document.getElementById(e.id),o=document.createElement("div");o.style.position="absolute",o.style.marginLeft="30px",o.style.top="0px",o.style.zIndex=11,o.style.backgroundColor="rgba(0,0,0,0.7)",o.id=t;var r=document.createElement("div");r.style.fontSize="16px",r.style.color="#fff",r.style.padding="10px";var i=document.createElement("span");i.style.color="#fff",i.innerHTML="",r.appendChild(i),o.appendChild(r),n.appendChild(o)}}),e.on("adTime",function(n){var o=e.id+"_showad",r=document.getElementById(o),i=r.childNodes,a=i[0].childNodes[0],s=param[t].advertising.admessage,l=Math.ceil(n.duration),d=l-Math.ceil(n.position);a.innerHTML=s.replace(/xx/,d)}),e.on("adComplete",function(){debug("jwplayer","adComplete"),d()}),e.on("adSkipped",function(){debug("jwplayer","adSkipped"),d()});var d=function(){var t=e.id+"_showad";if(document.getElementById(t)){var n=document.getElementById(t);n.parentNode.removeChild(n)}}}r.exlinks!==undefined&&e.addButton(adminUrl+"/images/sharing/appbar.information.png","関連ページ",function(){e.pause(!0);var o=e.id+"_exlinlk",r=document.getElementById(e.id),i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="absolute",i.style.top="0px",i.style.zIndex=11,i.style.backgroundColor="rgba(0,0,0,0.7)",i.id=o;var a=document.createElement("div");a.style.padding="5px 10px",a.style.textAlign="right";var s=document.createElement("span");s.innerHTML='<a href="javascript:void(0);" onclick="closeExtenstionButton(\''+o+'\');return false;"><img src="'+adminUrl+'/images/sharing/close.png"></a>',a.appendChild(s),i.appendChild(a);var l=document.createElement("div");l.style.fontSize="16px",l.style.color="#fff",l.style.marginTop="3px",l.style.marginLeft="30px";var d=document.createElement("span");d.style.color="#fff",d.innerHTML="関連ページ",l.appendChild(d),i.appendChild(l);var c=document.createElement("div");c.style.marginTop="5px",c.style.marginLeft="30px",c.style.marginRight="30px",c.style.fontSize="14px";var u,p={encode:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},g=param[t].plugins.exlinks;for(u=0;u<g.length;u++){var h=document.createElement("a"),f=g[u].title.length>20?g[u].title.substr(0,20)+"...":g[u].title;h.href=g[u].url,h.target="_blank",h.innerHTML=p.encode(f),h.style.color="#fff",h.onclick=function(e){return function(){n.requestExec({playhead:video[t].playhead,stat:"click",c:"exlink"+e})}}(u+1);var m=document.createElement("p");m.style.lineHeight="28px",m.style.margin=0,m.appendChild(h),c.appendChild(m)}i.appendChild(c),r.appendChild(i)},"exlinkButton"),r.sharing!==undefined&&e.addButton(adminUrl+"/images/sharing/appbar.social.sharethis.png","動画を共有",function(){e.pause(!0);var o=e.id+"_sharing_org",i=document.getElementById(e.id),a=document.createElement("div");a.style.width="100%",a.style.height="100%",a.style.position="absolute",a.style.top="0px",a.style.left="0px",a.style.zIndex=11,a.style.backgroundColor="rgba(0,0,0,0.7)",a.id=o;var s=document.createElement("div");s.style.padding="5px 10px",s.style.textAlign="right";var l=document.createElement("span");l.innerHTML='<a href="javascript:void(0);" onclick="closeExtenstionButton(\''+o+'\');return false;"><img src="'+adminUrl+'/images/sharing/close.png"></a>',s.appendChild(l),a.appendChild(s);var d=document.createElement("div");d.style.fontSize="16px",d.style.color="#fff",d.style.marginTop="20px",d.style.marginLeft="50px";var c=document.createElement("span");c.style.color="#fff",c.innerHTML="この動画を共有",d.appendChild(c),a.appendChild(d);var u=document.createElement("div");u.style.marginTop="20px",u.style.marginLeft="50px";var p=encodeURI(location.href),g=p;r.facebookUrl!=undefined&&r.facebookUrl.length>0&&(g=encodeURI(r.facebookUrl));var h=document.createElement("a");h.href="https://www.facebook.com/sharer/sharer.php?u="+g,h.target="_blank";var f=document.createElement("img");f.src=adminUrl+"/images/sharing/FB-f-Logo__blue_50.png",f.width="40",f.style.marginRight="15px",h.onclick=function(){n.requestExec({playhead:video[t].playhead,stat:"click",c:"facebook"})},h.appendChild(f),u.appendChild(h),h=document.createElement("a"),h.href="https://twitter.com/intent/tweet?url="+p,h.target="_blank",f=document.createElement("img"),f.src=adminUrl+"/images/sharing/TwitterLogo_white.png",f.style.backgroundColor="#55acee",f.style.marginRight="15px",f.width="40",h.onclick=function(){n.requestExec({playhead:video[t].playhead,stat:"click",c:"twitter"})},h.appendChild(f),u.appendChild(h),h=document.createElement("a");var m=document.title;""!==m&&(m=encodeURI(m)+"%0d%0a"),h.href="http://line.me/R/msg/text/?"+m+p,h.target="_blank",f=document.createElement("img"),f.src=adminUrl+"/images/sharing/linebutton.png",f.width="40",h.onclick=function(){n.requestExec({playhead:video[t].playhead,stat:"click",c:"line"})},h.appendChild(f),u.appendChild(h),a.appendChild(u),i.appendChild(a)},"sharingButton")},init=function(){"https:"===document.location.protocol&&(httpProtocol="https://",httpProtocolParam="&sp="),adminUrl=httpProtocol+"admin-"+url.JW+"/"+url.VERSION,playerFile="//"+dir+"-"+url.JW+"/player/jwplayer.js",m3u8Url=httpProtocol+url.LIBRARY+"/make.m3u8?token=";try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");e&&(hasFlash=!0)}catch(t){navigator.mimeTypes["application/x-shockwave-flash"]!=undefined&&(hasFlash=!0)}}(),loadingCnt=0,loadQue=[],queCnt=1,loadJWFile=function(e){return++loadingCnt,loadingCnt>1?(loadQue[loadingCnt]=e,!1):void setupJwPlayer(e)},setupJwPlayer=function(e){pid=e,debugColor="#"+Math.floor(16777215*Math.random()).toString(16),debug("setup","開始",e);var t=setDecode(param[e].playlist[0].mid),n=setDecode(param[e].playlist[0].cid),o="",r=httpProtocol+url.ACCESS_API+"?cid="+n+"&mid="+t+"&domain="+window.location.href,i=httpProtocol+url.LIBRARY+"/makeJsonp.php?json="+adminUrl+"/licenseKey/"+dir+".json&callback=keyCallbackJsonp",a=httpProtocol+dir+".eq.webcdn.stream.ne.jp/www50/"+dir+"/jmc_pub/jmc_swf/setting/service.jsonp?callback=serviseResult";jsonpRequest(r,function(){}).then(function(){jsonpRequest(a,function(){if(1==pdEnabled)for(var r in param)o=httpProtocol+url.MAKE_MP4+"/makemp4.json?callback=mp4Callback&token="+param[r].playlist[0].token+"&mid="+t+httpProtocolParam;jsonpRequest(o,function(){jsonpRequest(playerFile,function(){jsonpRequest(i,function(){var o,r="jstream",i=param[e],a=i.playlist.length;for(o=0;a>o;++o)i.playlist[o].sources=[],i.playlist[o].sources[0]={file:m3u8Url+i.playlist[o].token+"&mid="+t+httpProtocolParam},mp4uri[o]&&(i.playlist[o].sources[1]={file:mp4uri[o]});i.hlshtml===undefined&&"html5"===i.primary&&(i.hlshtml=!0),i.plugins[r]={},i.plugins[r].cid=n,i.plugins[r].duration=i.playlist[0].duration,i.plugins[r].mid=t,i.plugins[r].aqid=keyJson.aq_id,i.plugins.showad&&(i.plugins[r].showad=i.plugins.showad),i.plugins.exlinks&&(i.plugins[r].exlinks=i.plugins.exlinks),i.plugins.ga&&(i.plugins[r].ga=i.plugins.ga),i.plugins.sharing&&(i.plugins[r].sharing=i.plugins.sharing),i.plugins.facebookUrl&&(i.plugins[r].facebookUrl=i.plugins.facebookUrl);var s,l=document.getElementById(e);if(null!==l)var d=l.querySelector(".errorBox");if(null!==d)return++queCnt,debug("setup","終了",e),s=loadQue[queCnt],s!==undefined&&setupJwPlayer(loadQue[queCnt]),!1;jwplayer(e).setup(i);var c=new Analytics(!0),u=jwplayer(e).getPlaylist();if(u){if(u=u[0],video[e]={ga:keyJson.ga_id,cid:n,mid:t,playhead:0,playFlgAq:!1,replayFlg:!1,title:u.title,duration:u.duration},c.createGoogleAnalytics(param[e].plugins.gapv),c.setSvcid(n),c.setVid(n+"-"+t+"-0"),c.setTotal(video[e].duration),c.createSid(),c.createCid(),c.setRef(document.referrer),c.setSelf(document.location.href),c.requestExec({playhead:video[e].playhead,stat:"landing"}),window.onbeforeunload=function(){c.requestExec({playhead:video[e].playhead,stat:"exit"})},aqObject.aqid=keyJson.aq_id,aqObject.jsload("t10.aqtracker.com/asp/aq_tag_aos.js"),setPlayerEvent(jwplayer(e),e,c),!jwplayer(e).getPlaylist()[0])return showError(errorMessage["Error loading playlist: No playable sources found"],e),!1;var p=jwplayer(e).getPlaylist()[0].sources[0].file}++queCnt,debug("setup","終了",e),p&&debug("info",p,e),s=loadQue[queCnt],s!==undefined&&setupJwPlayer(s)})})})})})};window.keyCallbackJsonp=function(e){keyJson=e,jwplayer.key=e.jwplayer_key},window.accessControlResultEq=function(e){debug("setup","コールバック",pid);var t=e.response_status,n=e.response;return"OK"!==n?(console.warn("ドメイン制限",accessErrorCode[t]),void showError(accessErrorCode[t],pid)):void(debugFlag&&console.info("ドメイン制限",n,t))},window.serviceResult=function(e){pdEnabled=e.service.pd_enable},window.mp4Callback=function(e){mp4uri.push(e.mp4_url)},loadJWFile("mvAd-play");